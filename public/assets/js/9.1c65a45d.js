(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{220:function(e,r,t){"use strict";t.r(r);var a=t(0),n=Object(a.a)({},(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"code-reviews"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#code-reviews"}},[e._v("#")]),e._v(" Code Reviews")]),e._v(" "),t("h2",{attrs:{id:"reference-front-end-code-review-notes"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#reference-front-end-code-review-notes"}},[e._v("#")]),e._v(" Reference Front-end Code review notes")]),e._v(" "),t("h3",{attrs:{id:"mipod-src-main-c"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mipod-src-main-c"}},[e._v("#")]),e._v(" /miPod/src/main.c")]),e._v(" "),t("code",[e._v("\n\t(lines 31 and 32)\n"),t("pre",[t("code",[e._v('system("devmem 0x41200000 32 0");\n\nsystem("devmem 0x41200000 32 1");\n')])])]),e._v(" "),t("p",[e._v("Uses system to call devmem -- this binary is located at /sbin/devmem and can be replaced with a malicious binary.")]),e._v(" "),t("code",[e._v("\n\t(lines 109 and 110)\n"),t("pre",[t("code",[e._v("strcpy((void*)c->username, username);\n\nstrcpy((void*)c->pin, pin);\n")])])]),e._v(" "),t("p",[e._v("Uses strcopy -- does not perform bounds checking.")]),e._v(" "),t("code",[e._v("\n\t(line 200)\n"),t("pre",[t("code",[e._v("strcpy((char *)c->username, username);\n")])])]),e._v(" "),t("p",[e._v("Uses strcopy -- does not perform bounds checking.")]),e._v(" "),t("code",[e._v("\n\t(line 78)\n"),t("pre",[t("code",[e._v("fd = open(fname, O_RDONLY);\n")])])]),e._v(" "),t("p",[e._v("We will be able to manipulate the environment to change what is opened or use a race condition to bypass authentication")]),e._v(" "),t("code",[e._v("\n\t(line 215)\n"),t("pre",[t("code",[e._v("fd = open(song_name, O_WRONLY);\n")])])]),e._v(" "),t("p",[e._v("We will be able to manipulate the environment to change what is opened or use a race condition to bypass authentication")]),e._v(" "),t("code",[e._v("\n\t(line 322)\n"),t("pre",[t("code",[e._v("int fd = open(fname, O_WRONLY | O_CREAT | O_TRUNC);\n")])])]),e._v(" "),t("p",[e._v("We will be able to manipulate the environment to change what is opened or use a race condition to bypass authentication")]),e._v(" "),t("code",[e._v("\n\t(line 353)\n"),t("pre",[t("code",[e._v('mem = open("/dev/uio0", O_RDWR);\n\nc = mmap(NULL, sizeof(cmd_channel), PROT_READ | PROT_WRITE, MAP_SHARED, mem, 0);\n')])])]),e._v(" "),t("p",[e._v("Not vulnerable to environment manipulation, but we can watch it.")]),e._v(" "),t("code",[e._v("\n\t(line 89)\n"),t("pre",[t("code",[e._v("read(fd, song_buf, sb.st_size);\n")])])]),e._v(" "),t("p",[e._v("Check the size of the buffer vs what is passed.")]),e._v(" "),t("code",[e._v("\n\t(lines 272, 275, 278)\n"),t("pre",[t("code",[e._v("usleep(200000); // wait for DRM to print\n\n. . .\n\nusleep(200000); // wait for DRM to print\n\n. . .\n\nusleep(200000); // wait for DRM to print\n")])])]),e._v(" "),t("p",[e._v("uses depricated usleep instead of nanosleep() or setitimer().")]),e._v(" "),t("h3",{attrs:{id:"mipod-src-mipod-h"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mipod-src-mipod-h"}},[e._v("#")]),e._v(" /miPod/src/mipod.h")]),e._v(" "),t("code",[e._v("\n\t(lines 25, 28, and 29)\n"),t("pre",[t("code",[e._v('usleep(200000); // wait for DRM to print\n\n. . .\n\n#define print_prompt() printf(USER_PROMPT, "")\n\n#define print_prompt_msg(...) printf(USER_PROMPT, __VA_ARGS__)\n')])])]),e._v(" "),t("p",[e._v("Format string attack is possible on uses of mp_printf(), print_prompt(), and print_prompt_msg() -- not format specified.")]),e._v(" "),t("h2",{attrs:{id:"reference-back-end-code-review-notes"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#reference-back-end-code-review-notes"}},[e._v("#")]),e._v(" Reference Back-end Code review notes")]),e._v(" "),t("h3",{attrs:{id:"mb-drm-audio-fw-src-constants-h"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mb-drm-audio-fw-src-constants-h"}},[e._v("#")]),e._v(" /mb/drm_audio_fw/src/constants.h")]),e._v(" "),t("h3",{attrs:{id:"mb-drm-audio-fw-src-main-c"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mb-drm-audio-fw-src-main-c"}},[e._v("#")]),e._v(" /mb/drm_audio_fw/src/main.c")]),e._v(" "),t("h3",{attrs:{id:"mb-drm-audio-fw-src-platform-h"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mb-drm-audio-fw-src-platform-h"}},[e._v("#")]),e._v(" /mb/drm_audio_fw/src/platform.h")]),e._v(" "),t("h3",{attrs:{id:"mb-drm-audio-fw-src-platform-c"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mb-drm-audio-fw-src-platform-c"}},[e._v("#")]),e._v(" /mb/drm_audio_fw/src/platform.c")]),e._v(" "),t("h2",{attrs:{id:"review-of-our-design"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#review-of-our-design"}},[e._v("#")]),e._v(" Review of our design")]),e._v(" "),t("h3",{attrs:{id:"mb-drm-audio-fw-src-drm-h"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mb-drm-audio-fw-src-drm-h"}},[e._v("#")]),e._v(" /mb/drm_audio_fw/src/drm.h")]),e._v(" "),t("h3",{attrs:{id:"mb-drm-audio-fw-src-drm-c"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mb-drm-audio-fw-src-drm-c"}},[e._v("#")]),e._v(" /mb/drm_audio_fw/src/drm.c")]),e._v(" "),t("h3",{attrs:{id:"mb-drm-audio-fw-src-platform-h-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mb-drm-audio-fw-src-platform-h-2"}},[e._v("#")]),e._v(" /mb/drm_audio_fw/src/platform.h")]),e._v(" "),t("h3",{attrs:{id:"mb-drm-audio-fw-src-platform-c-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mb-drm-audio-fw-src-platform-c-2"}},[e._v("#")]),e._v(" /mb/drm_audio_fw/src/platform.c")])])}),[],!1,null,null,null);r.default=n.exports}}]);